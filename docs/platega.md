# Platega.io API

Базовая API документация для начала приёма средств и обработки вебхуков.

## Базовый URL

```
https://app.platega.io/
```

Это основной адрес API Platega, от которого строятся все запросы.

После подключения API:
- Вы сможете автоматически принимать платежи на сайте
- Система будет сама подтверждать оплату
- Заказы будут менять статус без ручной проверки

## Что такое API - простыми словами

API - это способ, с помощью которого ваш сайт «общается» с платёжной системой.

1. Ваш сайт говорит: **«Нужно принять оплату»**
2. Платёжная система отвечает: **«Вот ссылка на оплату»**
3. После оплаты система сообщает вашему сайту: **«Платёж прошёл»**

Обычно подключение занимает **2-6 часов**.

> **Важно!** Без настройки callback URL платежи **НЕ** будут подтверждаться автоматически.
> Это значит: клиент оплатит, но заказ останется «не оплачен».

## Callback URL

Callback URL - это путь для вебхуков (уведомлений) о статусе платежа.
Система сама отправляет его на ваш сервер, указанный в Callback URL в настройках вашего мерчанта в ЛК.

## GET-запрос

GET-запрос - это способ «спросить» у сервера информацию. Используется, когда нужно:
- Проверить статус платежа
- Получить информацию о заказе
- Узнать состояние операции

Пример:
```
https://api.site.com/payment/status?order_id=12345
```
Это значит: «Покажи статус заказа 12345»

## POST-запрос

POST-запрос - это запрос, с помощью которого система отправляет данные на сервер для обработки или создания чего-либо.

- **GET** - "дай посмотреть"
- **POST** - "вот данные, обработай"

POST применяется, когда нужно:
- Отправить оплату
- Создать заявку
- Передать webhook
- Авторизовать пользователя
- Сохранить данные

В контексте Platega / webhook'ов - именно POST используется для передачи информации о платеже.

## Аутентификация и вебхуки

Поставщик отправляет заголовки `X-MerchantId` и `X-Secret` и JSON-тело.

Статусы:
- `CONFIRMED` - успешная оплата
- `CANCELED` - неуспешная оплата
- `CHARGEBACK` - возврат денежных средств

В случае отсутствия успешного ответа в течение 60 секунд запрос отменяется, затем выполняется до 3 повторных попыток с интервалом 5 минут.

## Поддержка

Общение осуществляется только в беседе с менеджером + тех саппортом.
Чтобы саппорт увидел сообщение, нужно отметить **@platega_support_team** и прописать суть проблемы в этом же сообщении.

Что нужно отправить:
- Merchant ID
- Айди транзакции
- Тело запроса (в формате curl с полным рутом и хедерами)
- Скриншот + описание ошибки
- Логи (если есть)
